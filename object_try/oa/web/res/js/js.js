/**
*	createname：雨中磐石
*	homeurl：http://xh829.com/
*	Copyright (c) 2016 rainrock (xh829.com)
*	Date:2016-01-01
*/

function initbody(){}function bodyunload(){}function winHb(){var a=isIE?document.documentElement.offsetHeight:window.innerHeight;return a}function winWb(){var a=isIE?document.documentElement.offsetWidth:window.innerWidth;return a}var js,isIE,get,isempt,strreplace,strhtml,form,xy10,PROJECT="",HOST="",token="",adminid=0,nwjsgui=!1,adminface="images/noface.png",QOM="xinhu_",device="",DEBUG=!1,windows=null;apiurl="http://127.0.0.1/app/xinhu/",$(document).ready(function(){var b,c,d;try{nwjsgui="object"==typeof nw?nw:require("nw.gui")}catch(a){nwjsgui=!1}document.oncontextmenu=new Function("return false"),adminid=js.getoption("adminid"),device=js.getoption("device"),""==device&&(device=js.now("time")+"",js.setoption("device",device)),token=js.getoption("admintoken"),b=location.href,HOST=b.substr(b,b.lastIndexOf("/")+1),"http"==b.substr(0,4)?(c=b.split("web/"),apiurl=c[0]):nwjsgui&&(apiurl="http://demo.xh829.com/"),apiurl=js.getoption("apiurl",apiurl),js.splittime=parseFloat(js.getoption("splittime","0")),$(window).unload(function(){bodyunload(),js.onunload()});try{d=js.request("winobj"),nwjsgui&&(window.focus=function(){nwjsgui.Window.get().focus()}),""!=d&&(opener.js.openarr[d]=window)}catch(a){}b.indexOf("127.0.0")>0&&(DEBUG=!0),initbody()}),js={path:"index",url:"",bool:!1,login:{},initdata:{},scroll:function(){}},isIE=!0,document.all||(isIE=!1),get=function(a){return document.getElementById(a)},isempt=function(a){var b=!1;return(""==a||null==a||"undefined"==typeof a)&&(b=!0),"number"==typeof a&&(b=!1),b},strreplace=function(a){return isempt(a)?"":a.replace(/[ ]/gi,"").replace(/\s/gi,"")},strhtml=function(a){return isempt(a)?"":a.replace(/\</gi,"&lt;").replace(/\>/gi,"&gt;")},form=function(a,b){return b||(b="myform"),document[b][a]},xy10=function(a){var b=""+a;return b.length<2&&(b="0"+a),b},js.getarr=function(a,b){var d,c="";for(d in a)c+=" @@ "+d+"=>"+a[d];return b||alert(c),c},js.getarropen=function(a){jsopenararass=a,js.open("js/array.shtml")},js.str=function(a){a.value=strreplace(a.value)},js.scrolla=function(){var a=$(document).scrollTop();js.scroll(a)},js.request=function(a,b,c){if(b||(b=""),!a)return b;if(c||(c=location.href),c.indexOf("?")<0)return b;neurl=c.split("?")[1],neurl=neurl.split("&");var d=b;for(i=0;i<neurl.length;i++)if(val=neurl[i].split("="),val[0].toLowerCase()==a.toLowerCase()){d=val[1];break}return d||(d=""),d},js.now=function(a,b){a||(a="Y-m-d"),"now"==a&&(a="Y-m-d H:i:s");var c,d,e,f,g,h,i,j,n,k=0,l=0,m=0;return"string"==typeof b&&(b=b.replace(/\//gi,"-")),/^[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}/.test(b)?(b=b.split(" "),d=b[0],e=b[1],e||(e="00:00:00"),d=d.split("-"),e=e.split(":"),k=e[0],e.length>1&&(l=e[1]),e.length>2&&(m=e[2]),c=new Date(d[0],d[1]-1,d[2],k,l,m)):c="number"==typeof b?new Date(b):new Date,f=new Array("日","一","二","三","四","五","六"),g=c.getFullYear(),h=xy10(c.getMonth()+1),i=xy10(c.getDate()),j=c.getDay(),k=xy10(c.getHours()),l=xy10(c.getMinutes()),m=xy10(c.getSeconds()),n=f[j],"time"==a?c.getTime():a.replace("Y",g).replace("m",h).replace("d",i).replace("H",k).replace("i",l).replace("s",m).replace("w",j).replace("W",n)},js.float=function(a,b){(isNaN(a)||""==a||!a||null==a)&&(a="0"),a=parseFloat(a),b||0==b||(b=2);var c=a.toFixed(b);return c},js.splittime=0,js.getsplit=function(){var a,b,c;return js.servernow?(a=js.now("Y-m-d H:i:s"),b=js.now("time",a),c=js.now("time",js.servernow),js.splittime=b-c,void 0):!1},js.serverdt=function(a){var b,c;return a||(a="Y-m-d H:i:s"),b=js.now("time")-js.splittime,c=js.now(a,b)},js.openarr={},js.open=function(a,b,c,d,e,f){var g,j,k,l,m,n,o,p,q;if(d)try{return g=this.openarr[d],g.document.body,g.focus(),g}catch(h){}a.indexOf("?")>=0?"&":"?",b||(b=600),c||(c=500),j=.5*(screen.width-b),k=.5*(screen.height-c)-30,l=parseInt(50*Math.random()),0==l%2?(j+=l,k-=l):(j-=l,k+=l),e||(e={}),m="resizable=yes,scrollbars=yes,toolbar=no,menubar=no,scrollbars=yes,resizable=yes,location=no,status=no",n={left:""+j+"px",top:""+k+"px",width:""+b+"px",height:""+c+"px"},n=js.apply(n,e);for(o in n)m+=","+o+"="+n[o];return nwjsgui?(p=js.apply({frame:!0,width:b,height:c,x:j,y:k,icon:"images/logo.png"},f),"undefined"==typeof nw&&(p.toolbar=!1),q=nw.Window.open(a,p)):q=window.open(a,"",m),d&&(this.openarr[d]=q),!1},js.onunload=function(){var b,d,a=js.openarr;for(b in a)try{a[b].close()}catch(c){}try{d=js.request("winobj"),""!=d&&(opener.js.openarr[d]=!1)}catch(c){}},js.decode=function(a){var b={length:-1};try{b=new Function("return "+a)()}catch(c){}return b},js.move=function(a){var f,g,h,c=0,d=0,e=a;"string"==typeof a&&(e=get(a)),f=function(a){try{var b='<div id="divmovetemp" style="filter:Alpha(Opacity=0);opacity:0;z-index:99999;width:100%;height:100%;position:absolute;background-color:#000000;left:0px;top:0px;cursor:move"></div>';$("body").prepend(b),a=window.event||a,c=a.clientX-parseInt(e.style.left),d=a.clientY-parseInt(e.style.top),document.onselectstart=function(){return!1}}catch(f){}},g=function(a){try{get("divmovetemp").innerHTML,a=window.event||a,e.style.left=a.clientX-c+"px",e.style.top=a.clientY-d+"px"}catch(g){f(a)}},h=function(){document.onmousemove="",document.onselectstart="",$("#divmovetemp").remove()},document.onmousemove=g,document.onmouseup=h},js.setdev=function(a,b){var c=a;return isempt(c)&&(c=b),c},js.downshow=function(a){return js.open(""+apiurl+"?a=down&id="+a,600,350),!1},js.formatsize=function(a){var b=new Array("Byte","KB","MB","GB","TB","PB"),c=Math.floor(Math.log(a)/Math.log(1024)),d=a/Math.pow(1024,Math.floor(c));return js.float(d)+" "+b[c]},js.cookie=function(a){var c,e,f,b=document.cookie,d="";if(b.length<=0)return"";for(e=b.split("; "),f=0;f<e.length;f++)if(c=e[f].split("="),a.toLowerCase()==c[0].toLowerCase()){d=c[1];break}return d||(d=""),d},js.savecookie=function(a,b,c){var e,d=new Date;c||(c=365),b||(c=-10),d.setTime(d.getTime()+1e3*60*60*24*c),e=""+a+"="+b+";expires="+d.toGMTString()+";path=/",document.cookie=e},js.backtop=function(a){return a||(a=0),$("body,html").animate({scrollTop:a}),!1},js.backto=function(a){if(get(a)){var b=$("#"+a).offset();return this.backtop(b.top),!1}},js.applyIf=function(a,b){a||(a={}),b||(b={});for(var c in b)"undefined"==typeof a[c]&&(a[c]=b[c]);return a},js.apply=function(a,b){a||(a={}),b||(b={});for(var c in b)a[c]=b[c];return a},js.tanbodyindex=90,js.tanbody=function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o;for(this.tanbodyindex++,f=js.applyIf(e,{html:"",showfun:function(){},bodystyle:"",guanact:"",titlecls:"",btn:[]}),g=.5*(winWb()-c-50),h=.5*(winHb()-d-50),i="",j=""+a+"_main",$("#"+j).remove(),k="fixed","admin"==js.path&&(k="absolute"),i+='<div id="'+j+'" style="position:'+k+";background-color:#ffffff;left:"+g+"px;width:"+c+"px;top:"+h+"px;z-index:"+this.tanbodyindex+';box-shadow:0px 0px 10px rgba(0,0,0,0.3);">',i+='	<div class="title '+f.titlecls+'" style="-moz-user-select:none;-webkit-user-select:none;user-select:none;">',i+='		<table border="0"  width="100%" cellspacing="0" cellpadding="0"><tr>',i+='			<td height="34" style="font-size:14px; font-weight:bold;color:white; padding-left:8px" width="100%" onmousedown="js.move(\''+j+'\')" id="'+a+'_title">'+b+"</td>",i+='			<td><div onmouseover="this.style.backgroundColor=\'#C64343\'" onmouseout="this.style.backgroundColor=\'\'" style="padding:0px 8px;height:40px;overflow:hidden;cursor:pointer;" onclick="js.tanclose(\''+a+"','"+f.guanact+'\')"><div id="'+a+'_spancancel" style="height:16px;overflow:hidden;width:16px;background:url(images/wclose.png);margin-top:12px"></div></div></td>',i+="		</tr></table>",i+="	</div>",i+='	<div id="'+a+'_body" style="'+f.bodystyle+'">',i+=f.html,i+="	</div>",i+='	<div id="'+a+'_bbar" style="padding:5px 10px;background:#eeeeee;line-height:30px" align="right"><span id="msgview_'+a+'"></span>&nbsp;',l=0;l<f.btn.length;l++)m=f.btn[l],i+='<a class="webbtn" id="'+a+"_btn"+l+'" onclick="return false" >',i+=""+m.text+"</a>&nbsp; ";i+='		<a class="webbtn" id="'+a+'_cancel" onclick="return js.tanclose(\''+a+"','"+f.guanact+"')\" >取消</a>",i+="	</div>",i+="</div>",js.xpbody(a,f.mode),$("body").prepend(i),"none"==f.closed&&($("#"+a+"_cancel").remove(),$("#"+a+"_spancancel").parent().remove()),"none"==f.bbar&&$("#"+a+"_bbar").remove(),n=get(j).offsetWidth,o=get(j).offsetHeight,g=.5*(winWb()-n),h=.5*(winHb()-o-20),$("#"+j).css({left:""+g+"px",top:""+h+"px"}),f.showfun(a)},js.tanclose=function(a,b){var c,d;if(!isempt(b))for(c=b.split(","),d=0;d<c.length;d++)$("#"+c[d]+"_main").remove();return $("#"+a+"_main").remove(),js.xpbody(a,"none"),!1},js.xpbody=function(a,b){if("none"==b)return $("div[xpbody='"+a+"']").remove(),void 0;if(get("xpbg_bodydds"))return!1;var c='<div id="xpbg_bodydds" xpbody="'+a+'" oncontextmenu="return false" style="position:absolute;display:none;width:100%;height:100%;filter:Alpha(opacity=30);opacity:0.3;left:0px;top:0px;background-color:#000000;z-index:80"></div>';return $("body").prepend(c),$("#xpbg_bodydds").fadeIn(300),$("#xpbg_bodydds")},js.focusval="0",js.number=function(a){return(val=strreplace(a.value))?(isNaN(val)?(js.msg("msg","输入的不是数字"),a.value=js.focusval,a.focus()):a.value=val,void 0):(a.value=js.focusval,!1)},js.setmsg=function(a,b,c){c||(c="msgview"),$("#"+c).html(js.getmsg(a,b))},js.getmsg=function(a,b){b||(b="red");var c="";return a||(a=""),a.indexOf("...")>0&&(c='<img src="images/loading.gif" height="16" width="16" align="absmiddle"> ',b="#ff6600"),c+='<span style="color:'+b+'">'+a+"</span>",a||(c=""),c},js.msg=function(a,b,c){var d,e,f,g;clearTimeout(this.msgshowtime),"undefined"==typeof c&&(c=5),$("#msgshowdivla").remove(),"none"!=a&&a&&("wait"==a&&(b='<img src="images/loadings.gif" height="14" width="15" align="absmiddle"> '+b,c=60),"msg"==a&&(b="<font color=red>"+b+"</font>"),d=10,e='<div onclick="$(this).remove()" id="msgshowdivla" style="position:fixed;top:'+d+'px;z-index:20;" align="center"><div style="padding:8px 20px;background:rgba(0,0,0,0.7);color:white;font-size:16px;">'+b+"</div></div>",$("body").append(e),f=$("#msgshowdivla").width(),g=.5*(winWb()-f),$("#msgshowdivla").css("left",""+g+"px"),c>0&&(this.msgshowtime=setTimeout("$('#msgshowdivla').remove()",1e3*c)))},js.repempt=function(a,b){var c=a;return isempt(c)&&(c=b),c},js.getrand=function(){var a;return a=""+(new Date).getTime(),a+="_"+parseInt(9999*Math.random())},js._bodyclick={},js.downbody=function(a,b){this.allparent="",this.getparenta($(b.target),0);var c,e,d=this.allparent;for(c in js._bodyclick)e=js._bodyclick[c],d.indexOf(c)<0&&("hide"==e.type?$("#"+e.objid).hide():$("#"+e.objid).remove());return!0},js.addbody=function(a,b,c){js._bodyclick[a]={type:b,objid:c}},js.getparenta=function(a,b){try{if("BODY"==a[0].nodeName.toUpperCase())return}catch(c){return}var d=a.attr("id");isempt(d)||(this.allparent+=","+d),this.getparenta(a.parent(),b+1)},js.setoption=function(a,b){a=QOM+a;try{isempt(b)?localStorage.removeItem(a):localStorage.setItem(a,b)}catch(c){js.savecookie(a,b)}return!0},js.getoption=function(a,b){var c="";a=QOM+a;try{c=localStorage.getItem(a)}catch(d){c=js.cookie(a)}return isempt(b)&&(b=""),isempt(c)&&(c=b),c},js.location=function(a){location.href=a},js.apiurl=function(a,b,c){var f,d=""+apiurl+"api.php?m="+a+"&a="+b+"&adminid="+adminid,e="reim";d+="&device="+device,d+="&cfrom="+e,d+="&token="+token,c||(c={});for(f in c)d+="&"+f+"="+c[f];return d},js.ajaxwurbo=!1,js.ajaxbool=!1,js.ajax=function(a,b,c,d,e,f,g){var h,i,j,k;if(!js.ajaxbool||js.ajaxwurbo){if(clearTimeout(js.ajax_time),h=js.apiurl(a,b),js.ajaxbool=!0,e||(e="wait"),"function"!=typeof g&&(g=function(){}),"function"!=typeof d&&(d=function(){}),f||(f=function(){}),i=f(c),"string"==typeof i&&""!=i)return js.msg("msg",i),void 0;if("object"==typeof i&&(c=js.apply(c,i)),c)for(j in c)h+="&"+j+"="+c[j];h+="&callback=?",k="努力处理中...","wait"==e&&js.msg(e,k),$.getJSON(h,function(a){try{modeltabs("none")}catch(b){}js.ajaxbool=!1,clearTimeout(js.ajax_time),200!=a.code?(js.setmsg(a.msg),js.msg("msg","err1:"+a.msg),g(a.msg)):(js.setmsg(""),js.msg("none"),d(a.data))}),js.ajax_time=setTimeout(function(){try{modeltabs("none")}catch(a){}if(js.ajaxbool){var b="Error:请求超时?";$("#listmenutishi").remove(),js.setmsg(b),js.msg("msg",b),js.ajaxbool=!1,g(b)}},3e4)}},js.initbtn=function(a){var c,d,e,b=$("[click]");for(c=0;c<b.length;c++)d=$(b[c]),e=d.attr("clickadd"),"true"!=e&&d.click(function(b){var c=$(this).attr("click");return"string"==typeof c&&(c=c.split(","),a[c[0]](this,c[1],b)),!1});b.attr("clickadd","true")},js.isimg=function(a){var b="|png|jpg|bmp|gif|jpeg|",c=!1;return b.indexOf("|"+a+"|")>-1&&(c=!0),c},js.setselectdata=function(a,b,c,d){var e,g,f=b;if(b){for(c||(c="name"),"undefined"==typeof d&&(d=-1),e=0;e<f.length;e++)a.options.add(new Option(f[e].name,f[e][c])),e==d&&(g=f[e][c]);g&&(a.value=g)}},js.changeuser=function(a,b,c,d){var f,e=winHb()-70;return b||(b=""),c||(c=""),d||(d="请选择..."),e>400&&(e=400),js.tanbody("changeaction",d,280,e,{html:'<div style="height:'+e+'px"><iframe src="" name="winiframe" width="100%" height="100%" frameborder="0"></iframe></div>',bbar:"none"}),f="dept.html?adminid&adminid="+adminid+"&token="+token+"&changetype="+a+"&btype="+b+"&params="+c,winiframe.location.href=f,!1},js.changecancel=function(){js.tanclose("changeaction")},js.changeok=function(){},js.debug=function(a){DEBUG&&"object"==typeof console&&console.log(a)},js.confirm=function(a,b,c,d,e){function g(){var c=$(this).attr("sattr"),d=$("#confirm_input").val();return js.tanclose("confirm"),null==d&&(d=""),"function"==typeof b&&b(c,d),!1}e||(e=0);var f='<div style="padding:20px;line-height:30px" align="center">';1==e?(c||(c=""),f+='<div align="left" style="padding-left:15px">'+a+"</div>",f+='<div style="padding:10px"><input value="'+c+'" class="input" id="confirm_input" style="width:230px"></div>'):f+='<img src="images/helpbg.png" align="absmiddle">&nbsp; '+a,f+="</div>",f+='<div style="padding:10px" align="center"><a id="confirm_btn1" style="padding:5px 10px"  class="webbtn" sattr="yes" href="javascript:;"><i class="icon-ok"></i>&nbsp;确定</a> &nbsp;  &nbsp; <a sattr="no" style="padding:5px 10px; background-color:#888888" class="webbtn" id="confirm_btn" href="javascript:;"><i class="icon-remove"></i>&nbsp;取消</a></div>',f+='<div class="blank10"></div>',c||(c="danger"),d||(d='<i class="icon-question-sign"></i>&nbsp;系统提示'),js.tanbody("confirm",d,300,200,{closed:"none",bbar:"none",html:f,titlecls:c}),$("#confirm_btn1").click(g),$("#confirm_btn").click(g),get("confirm_btn").focus(),1==e&&get("confirm_input").focus()},js.prompt=function(a,b,c,d){js.confirm(b,c,d,a,1)},js.fileall=",aac,ace,ai,ain,amr,app,arj,asf,asp,aspx,av,avi,bin,bmp,cab,cad,cat,cdr,chm,com,css,cur,dat,db,dll,dmv,doc,docx,dot,dps,dpt,dwg,dxf,emf,eps,et,ett,exe,fla,ftp,gif,hlp,htm,html,icl,ico,img,inf,ini,iso,jpeg,jpg,js,m3u,max,mdb,mde,mht,mid,midi,mov,mp3,mp4,mpeg,mpg,msi,nrg,ocx,ogg,ogm,pdf,php,png,pot,ppt,pptx,psd,pub,qt,ra,ram,rar,rm,rmvb,rtf,swf,tar,tif,tiff,txt,url,vbs,vsd,vss,vst,wav,wave,wm,wma,wmd,wmf,wmv,wps,wpt,wz,xls,xlsx,xlt,xml,zip,",js.filelxext=function(a){return js.fileall.indexOf(","+a+",")<0&&(a="wz"),a};